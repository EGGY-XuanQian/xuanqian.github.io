<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>文件下载中心</title>

  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

  <style>
    body {
      margin:0;
      background:#ffffff;
      font-family:Arial, sans-serif;
    }

    .nav-wrapper {
      display:flex;
      align-items:center;
      justify-content:space-between;
      height:56px;
      background:#ffffff;
      border-bottom:1px solid #e0e0e0;
      padding:0 16px;
    }

    .brand-logo {
      font-size:1.05rem;
      display:flex;
      align-items:center;
      gap:6px;
      color:#202124;
      text-decoration:none;
    }

    .brand-logo .material-symbols-outlined {
      font-size:22px;
    }

    .nav-right {
      display:flex;
      align-items:center;
      gap:14px;
    }

    .nav-search {
      display:flex;
      align-items:center;
      background:#f1f3f4;
      padding:4px 10px;
      border-radius:4px;
      border:1px solid #d0d0d0;
    }

    .nav-search input {
      border:none;
      background:transparent;
      color:#202124;
      width:130px;
      font-size:13px;
      margin-left:4px;
      outline:none;
    }

    .dropdown-trigger {
      width:36px;
      height:36px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
      cursor:pointer;
      transition:background 0.15s;
    }

    .dropdown-trigger:hover {
      background:#e8e8e8;
      border-radius:50%;
    }

    .dropdown-trigger .material-symbols-outlined {
      font-size:24px;
      color:#202124;
    }
  </style>
</head>

<body>

  <nav>
    <div class="nav-wrapper">

      <a href="#" class="brand-logo">
        <span class="material-symbols-outlined">folder</span>
        文件下载中心
      </a>

      <div class="nav-right">

        <div class="nav-search">
          <span class="material-symbols-outlined" style="font-size:20px;color:#5f6368;">search</span>
          <input id="search" type="text" placeholder="搜索文件...">
        </div>

        <a class="dropdown-trigger" href="#!" data-target="menu-dropdown">
          <span class="material-symbols-outlined">more_vert</span>
        </a>

      </div>
    </div>
  </nav>
  <!-- 三点菜单 -->
  <ul id="menu-dropdown" style="
      position:absolute;
      background:#ffffff;
      border:1px solid #e0e0e0;
      border-radius:6px;
      padding:6px 0;
      list-style:none;
      width:160px;
      display:none;
      z-index:999;">
    <li style="padding:8px 14px;cursor:pointer;">按名称排序</li>
    <li style="padding:8px 14px;cursor:pointer;">按大小排序</li>
    <li style="padding:8px 14px;cursor:pointer;">按时间排序</li>
    <li style="padding:8px 14px;cursor:pointer;">切换网格视图</li>
    <li style="padding:8px 14px;cursor:pointer;">切换列表视图</li>
  </ul>

  <!-- 文件列表容器 -->
  <div id="file-list" style="
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(260px, 1fr));
      gap:16px;
      padding:20px;">
  </div>

  <!-- 文件卡片样式 -->
  <style>
    .file-card {
      background:#ffffff;
      border:1px solid #e0e0e0;
      border-radius:8px;
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:8px;
      transition:box-shadow .15s;
    }
    .file-card:hover {
      box-shadow:0 2px 8px rgba(0,0,0,0.1);
    }
    .file-icon {
      font-size:40px;
      color:#5f6368;
    }
    .file-name {
      font-size:14px;
      color:#202124;
      word-break:break-all;
    }
    .file-size {
      font-size:12px;
      color:#5f6368;
    }
  </style>

  <!-- JS 逻辑 -->
  <script>
    const files = [
      { name:"示例文件 A.zip", size:"12 MB" },
      { name:"示例文件 B.pdf", size:"3.1 MB" },
      { name:"示例文件 C.png", size:"820 KB" },
      { name:"示例文件 D.mp4", size:"45 MB" }
    ];

    function renderFiles() {
      const list = document.getElementById("file-list");
      list.innerHTML = "";
      files.forEach(f => {
        list.innerHTML += `
          <div class="file-card">
            <span class="material-symbols-outlined file-icon">description</span>
            <div class="file-name">${f.name}</div>
            <div class="file-size">${f.size}</div>
          </div>
        `;
      });
    }
    renderFiles();

    const trigger = document.querySelector(".dropdown-trigger");
    const menu = document.getElementById("menu-dropdown");

    trigger.addEventListener("click", e => {
      menu.style.display = menu.style.display === "block" ? "none" : "block";
      menu.style.left = (trigger.getBoundingClientRect().left - 120) + "px";
      menu.style.top = (trigger.getBoundingClientRect().bottom + 6) + "px";
    });

    document.addEventListener("click", e => {
      if (!trigger.contains(e.target) && !menu.contains(e.target)) {
        menu.style.display = "none";
      }
    });
  </script>
  <!-- 视图切换的额外样式 -->
  <style>
    /* 列表视图 */
    .list-view {
      display:flex !important;
      flex-direction:column;
      gap:10px;
    }
    .list-view .file-card {
      flex-direction:row;
      align-items:center;
      gap:14px;
      padding:10px 14px;
    }
    .list-view .file-icon {
      font-size:32px;
    }

    /* 动画 */
    .fade {
      animation: fadeIn .25s ease;
    }
    @keyframes fadeIn {
      from { opacity:0; transform:translateY(4px); }
      to   { opacity:1; transform:translateY(0); }
    }
  </style>

  <script>
    let isGrid = true;

    // 切换视图
    function toggleView(toGrid) {
      const list = document.getElementById("file-list");
      isGrid = toGrid;

      if (toGrid) {
        list.classList.remove("list-view");
        list.classList.add("fade");
      } else {
        list.classList.add("list-view");
        list.classList.add("fade");
      }
    }

    // 菜单点击事件
    const menuItems = document.querySelectorAll("#menu-dropdown li");

    menuItems.forEach((item, index) => {
      item.addEventListener("click", () => {
        if (index === 3) toggleView(true);   // 切换网格
        if (index === 4) toggleView(false);  // 列表视图
        menu.style.display = "none";
      });
    });
  </script>
  <!-- 排序 + 搜索逻辑 -->
  <script>
    // 排序函数
    function sortFiles(type) {
      if (type === "name") {
        files.sort((a, b) => a.name.localeCompare(b.name, "zh"));
      }
      if (type === "size") {
        const toKB = v => {
          if (v.includes("KB")) return parseFloat(v);
          if (v.includes("MB")) return parseFloat(v) * 1024;
          if (v.includes("GB")) return parseFloat(v) * 1024 * 1024;
          return 0;
        };
        files.sort((a, b) => toKB(a.size) - toKB(b.size));
      }
      if (type === "time") {
        files.sort(() => Math.random() - 0.5); // 示例：随机排序
      }
      renderFiles();
    }

    // 搜索功能
    const searchInput = document.getElementById("search");
    searchInput.addEventListener("input", () => {
      const keyword = searchInput.value.trim();
      const list = document.getElementById("file-list");

      list.innerHTML = "";

      files
        .filter(f => f.name.includes(keyword))
        .forEach(f => {
          list.innerHTML += `
            <div class="file-card fade">
              <span class="material-symbols-outlined file-icon">description</span>
              <div class="file-name">${f.name}</div>
              <div class="file-size">${f.size}</div>
            </div>
          `;
        });
    });

    // 菜单绑定排序
    menuItems.forEach((item, index) => {
      item.addEventListener("click", () => {
        if (index === 0) sortFiles("name");
        if (index === 1) sortFiles("size");
        if (index === 2) sortFiles("time");
      });
    });
  </script>
  <!-- 文件图标自动识别 + 下载按钮样式 -->
  <style>
    .file-actions {
      margin-top:6px;
      display:flex;
      justify-content:flex-end;
    }
    .download-btn {
      padding:4px 10px;
      background:#e8f0fe;
      border:1px solid #d2e3fc;
      border-radius:4px;
      font-size:12px;
      color:#1a73e8;
      cursor:pointer;
      transition:background .15s;
    }
    .download-btn:hover {
      background:#dbe7fd;
    }
  </style>

  <script>
    // 根据文件名自动选择图标
    function getIcon(name) {
      const ext = name.split('.').pop().toLowerCase();
      if (["zip","rar","7z"].includes(ext)) return "folder_zip";
      if (["png","jpg","jpeg","gif","bmp","webp"].includes(ext)) return "image";
      if (["mp4","avi","mov","mkv"].includes(ext)) return "movie";
      if (["mp3","wav","flac"].includes(ext)) return "music_note";
      if (["pdf"].includes(ext)) return "picture_as_pdf";
      if (["txt","md"].includes(ext)) return "description";
      return "insert_drive_file";
    }

    // 重写渲染函数：加入图标识别 + 下载按钮
    function renderFiles() {
      const list = document.getElementById("file-list");
      list.innerHTML = "";

      files.forEach(f => {
        const icon = getIcon(f.name);

        list.innerHTML += `
          <div class="file-card fade">
            <span class="material-symbols-outlined file-icon">${icon}</span>
            <div class="file-name">${f.name}</div>
            <div class="file-size">${f.size}</div>

            <div class="file-actions">
              <button class="download-btn" onclick="downloadFile('${f.name}')">
                下载
              </button>
            </div>
          </div>
        `;
      });
    }

    // 下载行为（示例）
    function downloadFile(name) {
      alert("模拟下载：" + name);
    }

    renderFiles();
  </script>
  <!-- 右键菜单 -->
  <ul id="context-menu" style="
      position:absolute;
      background:#ffffff;
      border:1px solid #e0e0e0;
      border-radius:6px;
      padding:6px 0;
      list-style:none;
      width:160px;
      display:none;
      z-index:9999;">
    <li style="padding:8px 14px;cursor:pointer;">预览</li>
    <li style="padding:8px 14px;cursor:pointer;">下载</li>
    <li style="padding:8px 14px;cursor:pointer;">复制名称</li>
  </ul>

  <!-- 预览弹窗 -->
  <div id="preview-modal" style="
      position:fixed;
      top:0;left:0;
      width:100%;height:100%;
      background:rgba(0,0,0,0.4);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:99999;">
    <div style="
        background:#ffffff;
        padding:20px;
        border-radius:8px;
        width:320px;
        text-align:center;">
      <h3 id="preview-title" style="margin:0 0 10px 0;font-size:16px;color:#202124;"></h3>
      <p style="font-size:14px;color:#5f6368;">这是一个示例预览窗口</p>
      <button onclick="closePreview()" style="
          margin-top:14px;
          padding:6px 14px;
          background:#e8f0fe;
          border:1px solid #d2e3fc;
          border-radius:4px;
          color:#1a73e8;
          cursor:pointer;">关闭</button>
    </div>
  </div>

  <!-- 右键菜单 + 预览逻辑 -->
  <script>
    const contextMenu = document.getElementById("context-menu");
    let rightClickFile = null;

    // 绑定右键事件
    document.addEventListener("contextmenu", e => {
      const card = e.target.closest(".file-card");
      if (!card) return;

      e.preventDefault();
      rightClickFile = card.querySelector(".file-name").innerText;

      contextMenu.style.display = "block";
      contextMenu.style.left = e.pageX + "px";
      contextMenu.style.top = e.pageY + "px";
    });

    // 点击外部关闭右键菜单
    document.addEventListener("click", e => {
      if (!contextMenu.contains(e.target)) {
        contextMenu.style.display = "none";
      }
    });

    // 右键菜单功能
    const ctxItems = contextMenu.querySelectorAll("li");
    ctxItems[0].onclick = () => openPreview(rightClickFile);
    ctxItems[1].onclick = () => downloadFile(rightClickFile);
    ctxItems[2].onclick = () => navigator.clipboard.writeText(rightClickFile);

    // 打开预览
    function openPreview(name) {
      document.getElementById("preview-title").innerText = name;
      document.getElementById("preview-modal").style.display = "flex";
    }

    // 关闭预览
    function closePreview() {
      document.getElementById("preview-modal").style.display = "none";
    }
  </script>

  <!-- 移动端适配 -->
  <style>
    @media (max-width: 600px) {
      .nav-wrapper {
        padding:0 10px;
      }
      .nav-search input {
        width:90px;
      }
      #file-list {
        grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));
      }
      .file-card {
        padding:10px;
      }
      .file-icon {
        font-size:32px;
      }
    }
  </style>
  <!-- 文件夹样式 -->
  <style>
    .folder-card {
      background:#ffffff;
      border:1px solid #e0e0e0;
      border-radius:8px;
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:8px;
      transition:box-shadow .15s;
      cursor:pointer;
    }
    .folder-card:hover {
      box-shadow:0 2px 8px rgba(0,0,0,0.1);
    }
    .folder-icon {
      font-size:42px;
      color:#f4b400;
    }
    .folder-name {
      font-size:14px;
      color:#202124;
      word-break:break-all;
    }
    .folder-children {
      margin-left:20px;
      margin-top:10px;
      display:none;
      border-left:2px solid #e0e0e0;
      padding-left:12px;
    }
  </style>

  <script>
    // 文件夹数据示例
    const folders = [
      {
        name: "项目文件",
        children: [
          { name:"接口文档.pdf", size:"2.1 MB" },
          { name:"UI设计稿.png", size:"1.4 MB" }
        ]
      },
      {
        name: "素材资源",
        children: [
          { name:"背景图.jpg", size:"820 KB" },
          { name:"按钮图标.zip", size:"4.2 MB" }
        ]
      }
    ];

    // 渲染文件夹
    function renderFolders() {
      const list = document.getElementById("file-list");

      folders.forEach(folder => {
        const folderId = "folder-" + folder.name.replace(/\s+/g, "-");

        list.innerHTML += `
          <div class="folder-card" onclick="toggleFolder('${folderId}')">
            <span class="material-symbols-outlined folder-icon">folder</span>
            <div class="folder-name">${folder.name}</div>
          </div>

          <div id="${folderId}" class="folder-children fade">
            ${folder.children.map(f => `
              <div class="file-card fade">
                <span class="material-symbols-outlined file-icon">${getIcon(f.name)}</span>
                <div class="file-name">${f.name}</div>
                <div class="file-size">${f.size}</div>
                <div class="file-actions">
                  <button class="download-btn" onclick="downloadFile('${f.name}')">下载</button>
                </div>
              </div>
            `).join("")}
          </div>
        `;
      });
    }

    // 展开/折叠文件夹
    function toggleFolder(id) {
      const box = document.getElementById(id);
      box.style.display = box.style.display === "block" ? "none" : "block";
    }

    // 在原有渲染文件后追加文件夹
    renderFolders();
  </script>
</body>
</html>
